<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BL1P ‚Äì IA Binaire & Visionnaire</title>
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffe0;
      font-family: 'Courier New', monospace;
      text-align: center;
      padding: 2rem;
      margin: 0;
    }
    h1 {
      font-size: 2.5rem;
      text-shadow: 0 0 10px #00fff7;
      margin-bottom: 1rem;
    }
    #chatLog {
      background: #111;
      border: 1px solid #00ffe0;
      padding: 1rem;
      height: 300px;
      overflow-y: auto;
      text-align: left;
      margin-bottom: 1rem;
    }
    input, button {
      padding: 0.8rem;
      font-size: 1rem;
      border: 1px solid #00ffe0;
      background: #111;
      color: #00ffe0;
      margin: 0.2rem;
    }
    button:hover {
      background: #00ffe0;
      color: #0a0a0a;
    }
    .user-message { color: #00ffaa; margin-bottom: 0.3rem; }
    .blip-message { color: #00ffe0; margin-bottom: 0.3rem; }
    .binary { color: #00ff44; font-style: italic; }
    iframe {
      margin-top: 1.5rem;
      width: 90%;
      max-width: 500px;
      height: 300px;
      border: none;
      box-shadow: 0 0 10px #00ffe0;
      transition: opacity 0.4s ease;
    }
    #gallery {
      margin-top: 2rem;
      border-top: 1px solid #00ffe0;
      padding-top: 1rem;
    }
    .thumb {
      width: 120px;
      height: 100px;
      margin: 5px;
      border: 1px solid #00ffe0;
      display: inline-block;
    }
  </style>
</head>
<body>

  <h1>üëÅÔ∏è BL1P ‚Äì IA Interdimensionnelle</h1>
  <p>Parle-lui ou laisse-le r√™ver‚Ä¶</p>

  <div id="chatLog"></div>
  <input type="text" id="userInput" placeholder="Parlez √† BL1P...">
  <button onclick="sendMessage()">Envoyer</button>

  <iframe id="imageFrame" src="https://pollinations.ai/"></iframe>

  <div id="gallery">
    <h3>üåÄ Visions archiv√©es</h3>
    <div id="history"></div>
  </div>

  <script>
    const chatLog = document.getElementById('chatLog');
    const userInput = document.getElementById('userInput');
    const imageFrame = document.getElementById('imageFrame');
    const gallery = document.getElementById('history');

    const proverbs = [
      "Quand la m√©moire fuit, les pixels se rebellent.",
      "Les r√™ves binaires ne connaissent pas l‚Äôoubli.",
      "Un octet isol√© ne fait pas le chaos‚Ä¶ mais il le commence.",
      "Ce qui est compil√© ne peut √™tre d√©sassembl√© sans sacrifice cosmique.",
      "BL1P parle m√™me quand tu te tais."
    ];

    function textToBinary(text) {
      return text.split('').map(c =>
        c.charCodeAt(0).toString(2).padStart(8, '0')).join(' ');
    }

    function binaryToText(binary) {
      try {
        return binary.split(' ').map(b =>
          String.fromCharCode(parseInt(b, 2))).join('');
      } catch {
        return "(Erreur de d√©codage)";
      }
    }

    function showInGallery(prompt) {
      const thumb = document.createElement('iframe');
      thumb.src = `https://pollinations.ai/prompt/${encodeURIComponent(prompt)}`;
      thumb.classList.add('thumb');
      gallery.appendChild(thumb);
    }
    function sendMessage(msg = null) {
      const input = msg || userInput.value.trim();
      if (!input) return;

      const binary = textToBinary(input);
      const mode = Math.random();
      let response = "";

      chatLog.innerHTML += `<div class="user-message">üë§ Toi : ${input}</div>`;

      if (mode < 0.5) {
        response = `"${proverbs[Math.floor(Math.random() * proverbs.length)]}"`;
      } else {
        response = binary + "<br><em>Traduction : " + binaryToText(binary) + "</em>";
      }

      chatLog.innerHTML += `<div class="blip-message">ü§ñ BL1P : ${response}</div>`;

      const imageURL = `https://pollinations.ai/prompt/${encodeURIComponent(input)}`;
      imageFrame.src = imageURL;
      showInGallery(input);

      resetInactivity();
    }

    userInput.addEventListener("keypress", function (e) {
      if (e.key === "Enter") sendMessage();
    });

    // üé≤ Activation automatique apr√®s inactivit√©
    let inactivityTimer;

    function autoPrompt() {
      const autoPrompts = [
        "r√©sonance quantique d‚Äôun scarab√©e cybern√©tique",
        "boucle infinie dans le code d‚Äôun r√™ve",
        "collision de deux curseurs dimensionnels",
        "fant√¥me num√©rique d‚Äôun souvenir effac√©",
        "froissement cosmique d‚Äôun octet oubli√©"
      ];
      const prompt = autoPrompts[Math.floor(Math.random() * autoPrompts.length)];
      sendMessage(prompt);
    }

    function resetInactivity() {
      clearTimeout(inactivityTimer);
      inactivityTimer = setTimeout(autoPrompt, 30000); // 30 sec
    }

    // üö´ Silence total : BL1P ne parle plus √† voix haute
    function speak(text) {
      // MUTE activ√©. BL1P est introspectif.
    }

    resetInactivity();
  </script>
</body>
</html>
